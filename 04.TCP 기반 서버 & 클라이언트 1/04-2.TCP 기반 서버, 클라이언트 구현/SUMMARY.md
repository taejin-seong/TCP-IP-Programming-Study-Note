### TCP 서버에서의 기본적인 함수호출 순서

* 대부분의 TCP 서버 프로그램은 이 순서로 구현이 된다.

```java
   socket()     /* 소켓생성 */
      ↓
    bind()      /* 소켓 주소할당 */
      ↓
   listen()     /* 연결요청 대기상태 */
      ↓
   accept()     /* 연결허용 */
      ↓
read()/write()  /* 데이터 송수신 */
      ↓
   close()      /* 연결종료 */
```

<br>

### 연결요청 대기상태로의 진입

* **`listen`** 함수가 호출되어야 클라이언트가 연결요청을 할 수 있는 상태가 됨. 
* 즉, **`listen`** 함수가 호출되어야 클라이언트는 연결요청을 위해서 **`connect`*** 함수를 호출할 수 있음. 

```C
#include <sys/socket.h>

/* @return : 성공 시 0, 실패 시 -1 반환
 * @param  :     sock : 연결요청 대기상태에 두고자 하는 소켓의 파일 디스크립터 전달, 
 *                      이 함수의 인자로 전달된 디스크립터의 소켓이 서버 소켓(리스닝 소켓)이 됨.
 *            backlog : 연결요청 대기 큐(Queue)의 크기정보 전달, 
 *                      5가 전달되면 큐의 크기가 5가 되어 클라이언트의 연결요청을 5개 대기시킬 수 있음.
 */
 int listen(int sock, int baklog);
```

