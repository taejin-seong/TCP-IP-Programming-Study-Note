`SO_REUSEADDR`옵션, 그리고 그와 관련 있는 **Time-wait 상태**는 상대적으로 중요함. 따라서 반드시 이해하고 기억해 둘 필요가 있음. 

<br>

## 주소할당 에러(Binding Error) 발생 <br>

* [reuseadr_esever.c]() 예제를 참고하여 설명.

  + [04-3.lterative 기반의 서버, 클라이언트 구현](https://github.com/taejin-seong/TCP-IP-Programming-Study-Note/tree/master/04.TCP%20%EA%B8%B0%EB%B0%98%20%EC%84%9C%EB%B2%84%20%26%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%201/04-3.lterative%20%EA%B8%B0%EB%B0%98%EC%9D%98%20%EC%84%9C%EB%B2%84%2C%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EA%B5%AC%ED%98%84)의 에코 클라이언트와 함께 실행하면 됨.

<hr>

* **클라이언트가 먼저 연결종료를 요청하는 경우는 매우 일반적인 상황이기 때문에 별다른 일이 발생할 것이 없음.** 
  
  + 서버의 재실행도 전혀 문제되지 않음.

  + 클라이언트 측에서 서버 측으로 종료를 먼저 알리게끔 하면, 서버 측으로 **`FIN`** 메세지를 먼저 전송하면서 **`Four-way handshaking`** 과정을 거치게 됨. [참고](https://github.com/taejin-seong/TCP-IP-Programming-Study-Note/blob/master/05.TCP%20%EA%B8%B0%EB%B0%98%20%EC%84%9C%EB%B2%84%20%26%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%202/05-2.TCP%EC%9D%98%20%EC%9D%B4%EB%A1%A0%EC%A0%81%EC%9D%B8%20%EC%9D%B4%EC%95%BC%EA%B8%B0!/02.SUMMARY.md)

  + 클라이언트 프로그램을 강제종료 할 경우에도 OS가 파일 및 소켓을 모두 닫아주는데 이 과정에서 **`close`** 함수를 호출한 것과 마찬가지로 서버 측에서 **`FIN`** 메세지가 전달됨.

<br>

* 그러나 **다음과 같이 프로그램을 종료하면** 이야기는 달라짐.

  + 서버와 클라이언트가 연결된 상태에서 서버 측 콘솔에서 CTRL+C를 입력한다. **`즉, 서버 프로그램을 강제 종료한다.`**

    - 이는 서버가 클라이언트 측으로 **`FIN`** 메세지를 전달하는 상황의 연출을 위한 것.

    - 그런데 이렇게 서버를 종료하면 서버의 재실행에 문제가 생김. 동일한 PORT번호를 기준으로 서버를 재실행하면 `"bind() error"` 라는 메세지가 출력될 뿐 서버는 실행되지 않음.

    - 그러나 이 상태에서 약 3분 정도 지난 다음 재실행을 하면 정상적인 실행을 확인할 수 있음.

<br>

* 앞서 보인 두 가지 실행방식에 있어서 유일한 차이점은 **`FIN` 메세지를 누가 먼저 전송했는지에 있음.**

* 그럼에도 불구하고 이렇게 차이를 보이는 이유에 대하여 설명함.
