## 프로세스 기반의 다중접속 서버의 구현 모델

* 이전에 구현했던 에코 서버는 한번에 하나의 클라이언트에게만 서비스를 제공할 수 있었음. 즉, 동시에 둘 이상의 클라이언트에게 서비스를 제공하지 못하는 구조였음.

* 따라서 이번에는 동시에 둘 이상의 클라이언트에게 서비스를 제공하는 형태로 에코 서버를 확장해 보임.

* 아래의 그림은 이어서 구현할 **멀티프로세스 기반의 다중접속 에코 서버의 구현모델**을 보이고 있음.

<br>

<p align="center">
   <img src="https://user-images.githubusercontent.com/70312248/176946284-f834aae3-cefa-4aa4-a650-a1d737834257.png" width="547" height="392"/>  
</p> 

<br>

* 위 그림에서 보듯이 클라이언트의 서비스 요청(연결요청)이 있을 때마다 에코 서버는 자식 프로세스를 생성해서 서비스를 제공.

  + 즉, 서비스를 요청하는 클라이언트의 수가 다섯이라면 에코 서버는 **추가로 다섯 개의 자식 프로세스를 생성해서 서비스를 제공.**

<br>

* 이를 위해서 에코 서버는 다음의 과정을 거쳐야 함. 이것이 기존 에코 서버와의 차이점.

  - **1 단계** : 에코 서버(부모 프로세스)는 **`accept`** 함수호출을 통해서 연결요청을 수락함.

  - **2 단계** : 이때 얻게 되는 소켓의 파일 디스크립터를 자식 프로세스를 생성해서 넘겨 줌.

  - **3 단계** : 자식 프로세스는 전달받은 파일 디스크립터를 바탕으로 서비스를 제공.


<br>

* 여기서 다소 혼란스러운 부분은 자식 프로세스에게 소켓의 디스크립터를 넘기는 방법. 하지만 실제 코드상에서 이를 확인하면 이는 아무것도 아님.

  - **자식 프로세스는 부모 프로세스가 소유하고 있는 것을 전부 복사하기 떄문.** 즉, 사실상 파일 디스크립터를 넘기는 과정은 별도로 거칠 필요가 없음.

  - [다중접속 에코 서버의 구현]() 예제를 참고.
