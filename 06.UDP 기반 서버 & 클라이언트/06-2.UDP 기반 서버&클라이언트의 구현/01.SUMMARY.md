### UDP에서의 서버와 클라이언트는 연결되어 있지 않습니다.

<br>

* UDP 서버, 클라이언트는 TCP와 같이 **연결된 상태로 데이터를 송수신하지 않음** 때문에 TCP와 달리 **`연결 설정의 과정이 필요 없음`**.

  + 따라서 TCP 서버 구현과정에서 거쳤던 **`listen`** 함수와 **`accept`** 함수의 호출은 불필요.

  + **`UDP 소켓의 생성`** 과 **`데이터의 송수신 과정`** 만 존재할 뿐.


<br>

### UDP에서는 서버건 클라이언트건 하나의 소켓만 있으면 됩니다.

<br>

* TCP에서는 소켓과 소켓의 관계가 일대일 이므로 서버에서 10개의 클라이언트에게 서비스를 제공하려면 문지기의 역할을 하는 서버 소켓을 제외하고도 10개의 소켓이 더 필요했음.

* 그러나 UDP는 **서버건 클라이언트건 하나의 소켓만 있으면 됨**.

  + 편지를 주고받기 위해서 필요한 **우체통**을 UDP 소켓에 비유할 수 있음. 우체통이 근처에 하나 있다면, 이를 이용해서 어디건 편지를 보낼 수 있는데 마찬가지로 UDP 소켓이 하나 있다면 어디건 데이터를 전송할 수 있음.

<br>

<p align="center">
   <img src="https://user-images.githubusercontent.com/70312248/167592240-888dba1c-76e3-454e-a8a4-518a38a4d021.png" width="475" height="400"/>  
</p>  

<br>

* 위 그림에서는 하나의 UDP 소켓으로 두 곳의 호스트를 대상으로 데이터의 송수신이 가능함을 보이고 있음. 
  
  + UDP 소켓은 하나만 있으면 둘 이상의 호스트와 통신이 가능함.

<br>

### UDP 기반의 데이터 입출력 함수

<br>

* TCP 소켓을 생성하고 나서 데이터를 전송하는 경우에는, TCP 소켓은 목적지에 해당하는 소켓과 연결된 상태이기 때문에 주소 정보를 따로 추가하는 과정이 필요없음.

* **그러나** UDP 소켓은 연결상태를 유지하지 않으므로 **데이터를 전송할 때마다 반드시 목적지의 주소정보를 별도로 추가해야함.**


<hr>
<br>

* **주소정보를 써넣으면서 데이터를 전송할 때 호출하는 UDP 관련함수를 소개.**

* 아래의 함수가 TCP 기반의 출력함수와 가장 비교되는 것은 목적지 주소정보를 요구하고 있다는 점.


```C
#include <sys/socket.h>

/* @return : 성공 시 전송된 바이트 수, 실패 시 -1 반환
 * @param  :    sock : 데이터 전송에 사용될 UDP 소켓의 파일 디스크립터를 인자로 전달.
 *               buf : 전송할 데이터를 저장하고 있는 버퍼의 주소 값 전달.
 *            nbytes : 전송할 데이터 크기를 바이트 단위로 전달.
 *             flags : 옵션 지정에 사용되는 매개변수, 지정할 옵션이 없다면 0 전달.
 *                to : 목적지 주소정보를 담고 있는 sockaddr 구조체 변수의 주소 값 전달.
 *           addrlen : 매개변수 to로 전달된 주소 값의 구조체 변수 크기 전달.
 */
sszie_t sendto(int sock, void *buff, size_t nbytes, int flags,
                                     struct sockaddr *to, socklen_t addrlen);
```

<br>

<hr>
<br>


* **UDP 데이터 수신에 사용되는 함수를 소개.**

* UDP 데이터는 발신자가 일정치 않기 때문에 발신지 정보를 얻을 수 있도록 함수가 정의되어 있음. 즉, 이 함수는 UDP 패킷에 담겨있는 발신지 정보를 함께 반환함.


```C
#include <sys/socket.h>

/* @return : 성공시 수신한 바이트 수, 실패시 -1 반환
 * @param  :    sock : 데이터 수신에 사용될 UDP 소켓의 파일 디스크립터를 인자로 전달.
 *               buf : 데이터 수신에 사용될 버퍼의 주소 값 전달.
 *            nbytes : 수신할 최대 바이트 수 전달, 때문에 매개변수 buff가 가리키는 버퍼의 크기를 넘을 수 없음.
 *             flags : 옵션 지정에 사용되는 매개변수, 지정할 옵션이 없다면 0 전달.
 *              from : 발신지 정보를 채워 넣을 sockaddr 구조체 변수의 주소 값 전달.
 *           addrlen : 매개변수 from으로 전달된 주소에 해당하는 구조체 변수의 크기정보를 담고 있는 변수의 주소값 전달.
 */
 ssize_t recvfrom(int sock, void *buff, size_t nbytes, int flags,
                                  struct sockaddr *from, socklen_t *addrlen);
```

<br>

* UDP 프로그램 작성의 핵심은 위의 두 함수에 있다고해도 과언이 아님.
